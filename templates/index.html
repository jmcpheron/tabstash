{% extends "base.html" %}

{% block title %}TabStash - Guitar Tabs{% endblock %}

{% block content %}
<div class="home">
    <div class="search-container">
        <input
            type="search"
            id="search"
            class="search-input"
            placeholder="Search tabs..."
            autocomplete="off"
        >
        <div id="search-results" class="search-results"></div>
    </div>

    {% if featured_tabs %}
    <section class="featured-section">
        <h2>Featured</h2>
        <div class="featured-grid">
            {% for tab in featured_tabs %}
            <a href="{{ base_url }}/tabs/{{ tab.artist_slug }}/{{ tab.slug }}.html" class="featured-card">
                <span class="featured-title">{{ tab.metadata.title }}</span>
                <span class="featured-artist">{{ tab.metadata.artist }}</span>
                <div class="featured-meta">
                    {% if tab.metadata.key %}
                    <span class="meta-badge-small">{{ tab.metadata.key }}</span>
                    {% endif %}
                    {% if tab.metadata.format == "compact" %}
                    <span class="meta-badge-small format-compact">chord chart</span>
                    {% endif %}
                </div>
            </a>
            {% endfor %}
        </div>
    </section>
    {% endif %}

    <section class="browse-section">
        <h2>Browse by Artist</h2>
        <div class="artist-grid">
            {% for artist in artists %}
            <a href="{{ base_url }}/artist/{{ artist.slug }}.html" class="artist-card">
                <span class="artist-name">{{ artist.name }}</span>
                <span class="artist-count">{{ artist.count }} tab{% if artist.count != 1 %}s{% endif %}</span>
            </a>
            {% endfor %}
        </div>
    </section>

    <section class="all-tabs-section">
        <h2>All Tabs ({{ total_tabs }})</h2>
        <ul class="tab-list" id="tab-list">
            {% for tab in tabs %}
            <li class="tab-item" data-id="{{ tab.artist_slug }}/{{ tab.slug }}">
                <a href="{{ base_url }}/tabs/{{ tab.artist_slug }}/{{ tab.slug }}.html" class="tab-link">
                    <span class="tab-title">{{ tab.metadata.title }}</span>
                    <span class="tab-artist">{{ tab.metadata.artist }}</span>
                </a>
            </li>
            {% endfor %}
        </ul>
    </section>
</div>
{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/minisearch@6.3.0/dist/umd/index.min.js"></script>
<script src="{{ base_url }}/static/js/search.js"></script>
{% endblock %}
